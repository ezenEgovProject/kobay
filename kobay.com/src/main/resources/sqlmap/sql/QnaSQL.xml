<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="QnaSpace">
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	
	<select id="qna.selectQnaList" resultClass="egovMap">
		SELECT  
				qna_unq,
				qna_group,
				qna_step,
				member_unq,
				auction_unq,
				questioner_unq,
				TO_CHAR(SUBSTR(qna_content,0,3999)) qna_content,
				qna_secret,
				qna_status,
				qna_rdate
		FROM qna
		WHERE auction_unq = #auction_unq#
		ORDER BY qna_rdate DESC
	</select>
	
	<!-- 질문 등록  -->
	<insert id="qna.insertQuestion">
		INSERT INTO qna
			(	
				qna_unq,
				qna_group,
				qna_step,
				member_unq,
				auction_unq,
				questioner_unq,
				qna_content,
				qna_secret,
				qna_status,
				qna_rdate
			)
		VALUES
			(	question_unq_seq.nextval,
				question_unq_seq.currval,
				'0',
			    #member_unq#,
			    #auction_unq#,
			    #questioner_unq#,
			    #qna_content#,
			    #qna_secret#,
			    #qna_status#,
			    sysdate
			)			
	</insert>
	
	<!-- 질문 내용 불러오기 -->
	<select id="qna.selectQuestion">
		SELECT  
				qna_unq,
				qna_group,
				qna_step,
				member_unq,
				auction_unq,
				questioner_unq,
				TO_CHAR(SUBSTR(qna_content,0,3999)) qna_content,
				qna_secret,
				qna_status,
				qna_rdate
		FROM 	qna
		WHERE	qna_unq=#qna_unq#
	</select>
	<!-- 질문 수정 -->
	<update id="qna.updateQuestion">
		UPDATE qna
		SET qna_content=#qna_content#
		WHERE qna_unq=#qna_unq#
	</update>
	
	<!-- 답변 등록
	<insert id="qna.insertQuestion">
		INSERT INTO qna
			(	
				qna_unq,
				qna_group,
				qna_step,
				member_unq,
				auction_unq,
				questioner_unq,
				qna_content,
				qna_secret,
				qna_status,
				qna_rdate
			)
		VALUES
			(	question_unq_seq.nextval,
				#qna_group#,
				'1',
			    #member_unq#,
			    #auction_unq#,
			    #questioner_unq#,
			    #qna_content#,
			    #qna_secret#,
			    #qna_status#,
			    sysdate
			)			
	</insert>  -->
</sqlMap>