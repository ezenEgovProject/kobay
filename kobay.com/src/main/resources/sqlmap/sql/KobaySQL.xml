<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="kobaySQL">
	
	<typeAlias alias="kobayVO" type="kobay.com.service.KobayVO"/>
	<typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias alias="tableVO" type="kobay.com.service.TableVO"/>
	
	
	<insert id="kobayDAO.insertWrite">
		insert into auction(
							member_unq,
							auction_unq,
							Lcategory,
							Mcategory,
							sdate,
							edate,
							title,
							image,
							sprice,
							deliveryway,
							deliverypee,
							seller,
							sellerphone,
							detail,
							auction_del	)
					
					values(
					#member_unq#,
					AUCTION_SEQ.nextval,
					#Lcategory#,
					#Mcategory#,
					#sdate#,
					#edate#,
					#title#,
					#image#,
					#sprice#,
					#deliveryway#,
					#deliverypee#,
					#seller#,
					#sellerphone#,
					#detail#,
					#auction_del#	
					)
					

	</insert>
	
	<select id="selectCtgList" resultClass="egovMap">
		 <![CDATA[	SELECT 
				ctgcd,
				ctgnm
	 		FROM  
	 			AUCTIONCTG a
	 		WHERE 1=1
	 		AND
	 			LENGTH(a.ctgcd) <= 4]]>
	</select>
	
	<select id="selectMCtgList" resultClass="egovMap">
		select 
			ctgcd,
			ctgnm
		from
			AUCTIONCTG
		where ctgcd like #ctgcd# || '_%'
	</select>
	
	<select id="selectSeqNumber" resultClass="java.lang.Integer">
	
		select last_number seqNumber from user_sequences where sequence_name='AUCTION_SEQ'	
	
	</select>
	
	
	<insert id="createTable">
	
		create table bidder$auction_unq$
			( auction_unq number,
			  member_unq number,
			  bid_price number,
			  bid_time timestamp	
			)
	
	</insert>
	
</sqlMap>