<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="QnaSpace">
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias alias="bidVO" type="kobay.com.service.BidVO"/>
	
	<select id="bid.selectBidList" resultClass="egovMap">
		SELECT  
				bidUnq,
				auctionUnq,
	 			memberUnq,
				bidPrice,
				bidRdate,
				aucStatus
		FROM auctionBid
		WHERE auctionUnq = #auctionUnq#
		ORDER BY bidRdate DESC
	</select>
	
	<!-- 경매 참가  -->
	<insert id="bid.insertBid" parameterClass="bidVO">
		INSERT INTO auctionBid
			(	
				bidUnq,
				auctionUnq,
	 			memberUnq,
				bidPrice,
				bidRdate,
				aucStatus
			)
		VALUES
			(	
				bid_seq.nextval,
				#auctionUnq#,
			    #memberUnq#,
			    #bidPrice#,			 
			    sysdate,
			    0
			)			
	</insert>
	
	<!-- 경매참여 내용 불러오기 -->
	<select id="bid.selectBid" resultClass="bidVO">
		SELECT  
				bidUnq,
				auctionUnq,
	 			memberUnq,
				bidPrice,
				bidRdate,
				aucStatus
		FROM 	auctionBid
		WHERE	memberUnq=#memberUnq# AND auctionUnq=#auctionUnq#
	</select>
	
	<!-- 경매 별 최대 입찰가 불러오기
	<select id="bid.selectMaxPrice" resultClass="bidVO">
		SELECT			   
				max(bidPrice) maxPrice
		FROM	auctionBid
		WHERE	auctionUnq = #auctionUnq#
	</select>
	 -->
	 
	 
	<!-- 경매참여 내용 수정 -->
	<update id="bid.updateBid">
		UPDATE auctionBid
		SET bidPrice=#bidPrice#
		WHERE bidUnq=#bidUnq#
	</update>
	
</sqlMap>